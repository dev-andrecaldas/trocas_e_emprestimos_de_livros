<header class="app-header">
  <div class="left-and-search">
    <div class="left" (click)="goHome()">
      <img src="book-icon.png" alt="Logo" class="logo" />
      <h1 class="title">Nexus</h1>
    </div>

    <div class="header-search">
      <div class="search-container">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input type="text" placeholder="Buscar livros..." />
      </div>
    </div>
  </div>

  <nav class="nav">
    <button class="nav-btn" (click)="goTo('/books')">Livros</button>
    <button class="nav-btn" (click)="goTo('/messages')">Mensagens</button>

    <button class="nav-btn notification-link" (click)="goTo('/notifications')">
      <span>Notificações</span>
      
      <span *ngIf="(unreadCount$ | async) as count" class="badge-wrapper">
        <span *ngIf="count > 0" class="notification-badge">
          {{ count > 9 ? '9+' : count }}
        </span>
      </span>
    </button>
    <div class="profile-container" #profileContainer>
      <button class="nav-btn" (click)="toggleDropdown()">Perfil</button>
      <div class="dropdown" *ngIf="dropdownOpen">
        <button type="button" class="dropdown-item" (click)="goTo('/profile')">Meu Perfil</button>
        <button type="button" class="dropdown-item" (click)="logout()">Sair da Conta</button>
      </div>
    </div>
  </nav>
</header>